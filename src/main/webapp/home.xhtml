<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:b="http://bootsfaces.net/ui" xmlns:f="http://java.sun.com/jsf/core">
    <h:head>
        <title>Shedule</title>

        <h:outputStylesheet href='https://fonts.googleapis.com/css?family=Passion+One' rel='stylesheet'/>
        <h:outputStylesheet library="css" name="style.css"/>
        <h:outputStylesheet href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css' rel='stylesheet'/>
        <h:outputStylesheet href='https://fonts.googleapis.com/css?family=Oxygen' rel='stylesheet'/>
        <h:outputScript name="js/jquery-1.8.3.min.js"/>
        <h:outputScript name="js/jquery.countdown.js"/>
        <h:outputScript>
            $( document ).ready(function() {
                setInterval(function(){
                    $.ajax({
                        type: "GET",
                        url : "/helloworld/TableScheduleServlet" ,
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        success: function (response) {
                            console.log("response:");
                            console.log(response);
                            if("true".localeCompare(response) == 0){
                                location.reload();
                            }
                        },
                        error: function () {
                            console.log("Error with getting servlet data")
                        }
                    });
                }, 5000);
            });
        </h:outputScript>

    </h:head>
    <h:body id="maintable">
        <h1><a href="http://localhost:8080/">Justrailways</a></h1>
        <h2>Time Table</h2>
        <h3>#{schedule.station}</h3>
        <div id="date"></div>
        <b:dataTable id="schedules" value="#{schedule.timeSchedules}" var="time">
            <b:dataTableColumn value="#{time.train}" />
            <b:dataTableColumn value="#{time.stationDeparture}" />
            <b:dataTableColumn value="#{time.timeDeparture}" />
            <b:dataTableColumn value="#{time.stationArrival}"/>
            <b:dataTableColumn value="#{time.timeArrival}"  />
        </b:dataTable>
        <h:graphicImage name="images/Landscape.png"/>
    </h:body>
</html>